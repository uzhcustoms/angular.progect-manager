(self.webpackChunkproject_manager=self.webpackChunkproject_manager||[]).push([[762],{1762:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ProjectsModule:()=>E});var o=n(8583),i=n(1841),a=n(4655),r=n(3679),s=n(7716),c=n(243),d=n(2091),m=n(8295),l=n(9983);function p(t,e){1&t&&(s.TgZ(0,"mat-header-cell"),s._uU(1," Name "),s.qZA())}const u=function(t){return["project",t]};function g(t,e){if(1&t&&(s.TgZ(0,"mat-cell",14),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.Q6J("routerLink",s.VKq(2,u,e.index)),s.xp6(1),s.hij(" ",t.name," ")}}function f(t,e){1&t&&(s.TgZ(0,"mat-header-cell"),s._uU(1," Description "),s.qZA())}function h(t,e){if(1&t&&(s.TgZ(0,"mat-cell",15),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.description," ")}}function x(t,e){1&t&&s._UZ(0,"mat-header-cell")}function _(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-cell"),s.TgZ(1,"button",16),s.NdJ("click",function(){const e=s.CHM(t),n=e.$implicit,o=e.index;return s.oxw().setEditForm(n,o)}),s._uU(2,"Edit"),s.qZA(),s.TgZ(3,"button",17),s.NdJ("click",function(){const e=s.CHM(t).index;return s.oxw().onDelete(e)}),s._uU(4,"Delete"),s.qZA(),s.qZA()}}function C(t,e){1&t&&s._UZ(0,"mat-header-row")}function k(t,e){1&t&&s._UZ(0,"mat-row")}function Z(t,e){1&t&&(s.TgZ(0,"div",27),s._uU(1," Name is not correct "),s.qZA())}function b(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"form",18),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().saveDataProjects()}),s.TgZ(1,"p",19),s._uU(2),s.qZA(),s.TgZ(3,"div",20),s.TgZ(4,"mat-form-field",21),s.TgZ(5,"mat-label"),s._uU(6,"Name"),s.qZA(),s._UZ(7,"input",22),s.qZA(),s.YNc(8,Z,2,0,"div",23),s.TgZ(9,"mat-form-field",21),s.TgZ(10,"mat-label"),s._uU(11,"Description"),s.qZA(),s._UZ(12,"input",24),s.qZA(),s.qZA(),s.TgZ(13,"button",25),s._uU(14,"Save"),s.qZA(),s.TgZ(15,"button",26),s.NdJ("click",function(){return s.CHM(t),s.oxw().exitForm()}),s._uU(16,"Cancel"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.projectForm),s.xp6(2),s.Oqu(t.editing?"Edit project":"Create new project"),s.xp6(6),s.Q6J("ngIf",t.projectForm.controls.name.invalid&&t.projectForm.controls.name.touched)}}let j=(()=>{class t{constructor(t,e,n){this.projectsService=t,this.activateRoute=e,this.fb=n,this.id=0,this.adding=!1,this.editing=!1,this.editingIndex=0,this.projects=[],this.projectForm=new r.cw({id:new r.NI(0),name:new r.NI("",[r.kI.required,r.kI.pattern(/^.{2,35}$/)]),description:new r.NI(""),tasks:new r.NI([])}),this.displayedColumns=["name","description","id"],this.dataSource=[],this.getProjects()}ngOnInit(){}getProjects(){this.projectsService.getProjects().subscribe(t=>{this.projects=t,localStorage.setItem("projects",JSON.stringify(this.projects)),this.projectListTableRefresh()})}saveDataProjects(){const t=Math.max(...this.projects.map(t=>t.id),0),e=this.projectForm.value;""!=this.projectForm.value.name&&(this.editing?this.projects.splice(this.editingIndex,1,e):(this.projectForm.value.id=t+1,this.projectForm.value.tasks=[],this.projects.push(e))),this.projectListTableRefresh(),this.exitForm()}setEditForm(t,e){this.projectForm.patchValue({id:t.id,name:t.name,description:t.description,tasks:t.tasks}),this.editing=!0,this.editingIndex=e}onDelete(t){this.projects.splice(t,1),this.projectListTableRefresh()}exitForm(){this.adding=!1,this.editing=!1,this.projectForm.reset()}projectListTableRefresh(){this.dataSource=[],setTimeout(()=>{this.dataSource=this.projects},50)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.m),s.Y36(a.gz),s.Y36(r.qu))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-projects"]],decls:19,vars:4,consts:[[1,"projects"],[1,"title-addBtn"],[1,"addBtn",3,"click"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],["class","project-name",3,"routerLink",4,"matCellDef"],["matColumnDef","description"],["class","project-description",4,"matCellDef"],["matColumnDef","id"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["validate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"project-name",3,"routerLink"],[1,"project-description"],[1,"editBtn",3,"click"],[1,"deleteBtn",3,"click"],["validate","",3,"formGroup","ngSubmit"],[1,"title-project"],[1,"formInputs"],["appearance","outline"],["matInput","","required","","formControlName","name","type","text"],["class","alert alert-danger",4,"ngIf"],["matInput","","formControlName","description","type","text"],["id","btnSave","type","submit"],["id","btnCancel",3,"click"],[1,"alert","alert-danger"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h3"),s._uU(3,"Projects"),s.qZA(),s.TgZ(4,"button",2),s.NdJ("click",function(){return e.adding=!e.adding}),s._uU(5," Add New Project"),s.qZA(),s.qZA(),s.TgZ(6,"mat-table",3),s.ynx(7,4),s.YNc(8,p,2,0,"mat-header-cell",5),s.YNc(9,g,2,4,"mat-cell",6),s.BQk(),s.ynx(10,7),s.YNc(11,f,2,0,"mat-header-cell",5),s.YNc(12,h,2,1,"mat-cell",8),s.BQk(),s.ynx(13,9),s.YNc(14,x,1,0,"mat-header-cell",5),s.YNc(15,_,5,0,"mat-cell",10),s.BQk(),s.YNc(16,C,1,0,"mat-header-row",11),s.YNc(17,k,1,0,"mat-row",12),s.qZA(),s.YNc(18,b,17,3,"form",13),s.qZA()),2&t&&(s.xp6(6),s.Q6J("dataSource",e.dataSource),s.xp6(10),s.Q6J("matHeaderRowDef",e.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",e.displayedColumns),s.xp6(1),s.Q6J("ngIf",e.adding||e.editing))},directives:[d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,o.O5,d.ge,d.ev,a.rH,d.XQ,d.Gk,r._Y,r.JL,r.sg,m.KE,m.hX,l.Nt,r.Fj,r.Q7,r.JJ,r.u],styles:["h3[_ngcontent-%COMP%]{margin-bottom:10px;color:#397575}table[_ngcontent-%COMP%]{box-shadow:0 0 4px 4px #d4d4d4;padding:0 15px 15px;margin-top:15px;border-collapse:collapse}th[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{text-align:center;padding:25px;color:#397575}td[_ngcontent-%COMP%]{padding:10px 20px;border-bottom:1px solid #cecece}.projects[_ngcontent-%COMP%]{margin-left:100px;margin-top:45px}.title-project[_ngcontent-%COMP%]{text-align:center;font-weight:700;color:#397575}.project-name[_ngcontent-%COMP%]:hover{background-color:#79adad;transform:scale(1.05);color:#fff}.project-description[_ngcontent-%COMP%]{padding-left:20px}.new-project[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}label[_ngcontent-%COMP%]{padding:10px;text-align:center;width:25%}input[type=text][_ngcontent-%COMP%]{padding:7px}#btnCancel[_ngcontent-%COMP%], #btnSave[_ngcontent-%COMP%]{width:45%;margin:5px;padding:8px;background-color:#79adad;border-radius:2px;border:none;color:#fff}#btnCancel[_ngcontent-%COMP%]:hover, #btnSave[_ngcontent-%COMP%]:hover{transform:scale(1.1)}#btnSave[_ngcontent-%COMP%]{margin-top:15px;margin-right:15px}#btnCancel[_ngcontent-%COMP%]{margin-left:10px;background-color:#d1b373}.name-project[_ngcontent-%COMP%]:hover{background-color:#79adad;border-radius:2px;transform:scale(1.1);color:#fff}.title-addBtn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;min-width:350px}.addBtn[_ngcontent-%COMP%], .deleteBtn[_ngcontent-%COMP%], .editBtn[_ngcontent-%COMP%]{padding:3px 10px}.addBtn[_ngcontent-%COMP%]:hover, .deleteBtn[_ngcontent-%COMP%]:hover, .editBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.addBtn[_ngcontent-%COMP%], .deleteBtn[_ngcontent-%COMP%], .editBtn[_ngcontent-%COMP%]{background-color:#79adad;border:none;color:#fff;border-radius:2px}.deleteBtn[_ngcontent-%COMP%]{background-color:#d1b373}.editBtn[_ngcontent-%COMP%]{margin-right:10px}.addBtn[_ngcontent-%COMP%]{margin-left:auto;padding:10px;margin-bottom:8px}.formInputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:30px}.alert-danger[_ngcontent-%COMP%]{color:red;margin-bottom:20px}"]}),t})();var v=n(2744);class w{constructor(t){this.id=0,this.name="",this.projectId=0,this.description="",this.comments="",t&&(this.id=t.id,this.name=t.name,this.projectId=t.projectId,this.description=t.description,this.comments=t.comments)}}var O=(()=>(function(t){t[t.none=0]="none",t[t.add=1]="add",t[t.edit=2]="edit"}(O||(O={})),O))();function M(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"form",1),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().saveForm()}),s.TgZ(1,"p",2),s._uU(2),s.qZA(),s.TgZ(3,"div",3),s.TgZ(4,"mat-form-field",4),s.TgZ(5,"mat-label"),s._uU(6,"Name"),s.qZA(),s._UZ(7,"input",5),s.qZA(),s.TgZ(8,"mat-form-field",4),s.TgZ(9,"mat-label"),s._uU(10,"Description"),s.qZA(),s._UZ(11,"input",6),s.qZA(),s.TgZ(12,"mat-form-field",4),s.TgZ(13,"mat-label"),s._uU(14,"Comments"),s.qZA(),s._UZ(15,"textarea",7),s.qZA(),s.qZA(),s.TgZ(16,"button",8),s._uU(17,"Save"),s.qZA(),s.TgZ(18,"button",9),s.NdJ("click",function(){return s.CHM(t),s.oxw().exitForm()}),s._uU(19,"Cancel"),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.taskForm),s.xp6(2),s.Oqu(t.showTitleAddForm()?"Create new task":"Edit task")}}let P=(()=>{class t{constructor(){this.taskEvent=new s.vpe,this.formStatusEvent=new s.vpe,this._task=new w,this._formStatus=O.none,this.taskForm=new r.cw({id:new r.NI(0),name:new r.NI(""),projectId:new r.NI(0),description:new r.NI(""),comments:new r.NI("")})}set formStatus(t){this._formStatus=t}get formStatus(){return this._formStatus}set task(t){this._task=t,this.taskForm.patchValue({id:this._task.id,name:this._task.name,projectId:this._task.projectId,description:this._task.description,comments:this._task.comments})}get task(){return this._task}ngOnInit(){}showForm(){return this.formStatus!==O.none}showTitleAddForm(){return this.formStatus==O.add}saveForm(){this.formStatus==O.edit&&(this.task.id=this.taskForm.value.id,this.task.projectId=this.taskForm.value.projectId),this.task.name=this.taskForm.value.name,this.task.description=this.taskForm.value.description,this.task.comments=this.taskForm.value.comments,this.taskEvent.emit(this.task),this._task=new w,this.formStatus=O.none,this.taskForm.reset()}exitForm(){this.taskForm.reset(),this.formStatus=O.none,this.formStatusEvent.emit(this.formStatus)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["form-component"]],inputs:{formStatus:"formStatus",task:"task"},outputs:{taskEvent:"taskEvent",formStatusEvent:"formStatusEvent"},decls:1,vars:1,consts:[[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"title-task"],[1,"formInputs"],["appearance","fill"],["matInput","","required","","formControlName","name","type","text"],["matInput","","formControlName","description","type","text"],["matInput","","formControlName","comments","placeholder","Comments..."],["id","btnSave","type","submit"],["id","btnCancel","type","reset",3,"click"]],template:function(t,e){1&t&&s.YNc(0,M,20,2,"form",0),2&t&&s.Q6J("ngIf",e.showForm())},directives:[o.O5,r._Y,r.JL,r.sg,m.KE,m.hX,l.Nt,r.Fj,r.Q7,r.JJ,r.u],styles:[".title-task[_ngcontent-%COMP%]{margin-top:25px;color:#397575;text-align:center}#btnCancel[_ngcontent-%COMP%], #btnSave[_ngcontent-%COMP%]{width:45%;margin:5px;padding:8px;background-color:#79adad;border-radius:2px;border:none;color:#fff}#btnCancel[_ngcontent-%COMP%]:hover, #btnSave[_ngcontent-%COMP%]:hover{transform:scale(1.1)}#btnSave[_ngcontent-%COMP%]{margin-top:15px;margin-right:15px}#btnCancel[_ngcontent-%COMP%]{margin-left:10px;background-color:#d1b373}.formInputs[_ngcontent-%COMP%]{display:flex;flex-direction:column}.mat-table[_ngcontent-%COMP%]{padding-right:20px}"]}),t})();function S(t,e){1&t&&(s.TgZ(0,"mat-header-cell"),s._uU(1," Name "),s.qZA())}function T(t,e){if(1&t&&(s.TgZ(0,"mat-cell",15),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.name," ")}}function q(t,e){1&t&&(s.TgZ(0,"mat-header-cell"),s._uU(1," Description "),s.qZA())}function A(t,e){if(1&t&&(s.TgZ(0,"mat-cell",16),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.description," ")}}function N(t,e){1&t&&(s.TgZ(0,"mat-header-cell"),s._uU(1," Comments "),s.qZA())}function B(t,e){if(1&t&&(s.TgZ(0,"mat-cell",16),s._uU(1),s.qZA()),2&t){const t=e.$implicit;s.xp6(1),s.hij(" ",t.comments," ")}}function F(t,e){1&t&&s._UZ(0,"mat-header-cell")}function I(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"mat-cell"),s.TgZ(1,"button",17),s.NdJ("click",function(){const e=s.CHM(t),n=e.$implicit,o=e.index;return s.oxw().setEditForm(n,o)}),s._uU(2,"Edit"),s.qZA(),s.TgZ(3,"button",18),s.NdJ("click",function(){const e=s.CHM(t).index;return s.oxw().onDelete(e)}),s._uU(4,"Delete"),s.qZA(),s.qZA()}}function U(t,e){1&t&&s._UZ(0,"mat-header-row")}function y(t,e){1&t&&s._UZ(0,"mat-row")}const D=[{path:"",component:j},{path:"project/:id",component:(()=>{class t{constructor(t,e){this.projectsService=t,this.activateRoute=e,this.formStatus=O.none,this.id=0,this.project=new v.I,this.editingIndex=0,this.task=new w,this.displayedColumns=["name","description","comments","id"],this.dataSource=[],this.getProject()}ngOnInit(){}getProject(){this.activateRoute.params.subscribe(t=>this.id=t.id),this.projectsService.getProjects().subscribe(t=>{this.project=t[this.id],this.projectListTableRefresh()})}saveDataTasks(t){const e=Math.max(...this.project.tasks.map(t=>t.id),0);""!=t.name&&(t.id>0?this.project.tasks.splice(this.editingIndex,1,t):(t.id=e+1,t.projectId=this.project.id,this.project.tasks.push(t))),this.projectListTableRefresh(),console.log(this.project.tasks),this.task=new w,this.formStatus=O.none}setAddForm(){this.task=new w,this.formStatus=O.add,console.log(`formStatus - ${this.formStatus}`)}setEditForm(t,e){this.task=t,this.editingIndex=e,this.formStatus=O.edit,console.log(`formStatus - ${this.formStatus}`)}onDelete(t){this.project.tasks.splice(t,1),this.projectListTableRefresh()}projectListTableRefresh(){this.dataSource=[],setTimeout(()=>{this.dataSource=this.project.tasks},50)}setFormStatus(t){this.formStatus=t}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.m),s.Y36(a.gz))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-tasks"]],decls:24,vars:6,consts:[[1,"tasks"],[1,"title-addBtn"],["type","button",1,"addBtn",3,"click"],[1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],["class","task-name",4,"matCellDef"],["matColumnDef","description"],["class","task-description",4,"matCellDef"],["matColumnDef","comments"],["matColumnDef","id"],[4,"matCellDef"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"task","formStatus","formStatusEvent","taskEvent"],[1,"task-name"],[1,"task-description"],["type","button",1,"editBtn",3,"click"],["type","button",1,"deleteBtn",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"h3"),s._uU(2),s.qZA(),s.TgZ(3,"div",1),s.TgZ(4,"h4"),s._uU(5,"Tasks"),s.qZA(),s.TgZ(6,"button",2),s.NdJ("click",function(){return e.setAddForm()}),s._uU(7," Add New Task"),s.qZA(),s.qZA(),s.TgZ(8,"mat-table",3),s.ynx(9,4),s.YNc(10,S,2,0,"mat-header-cell",5),s.YNc(11,T,2,1,"mat-cell",6),s.BQk(),s.ynx(12,7),s.YNc(13,q,2,0,"mat-header-cell",5),s.YNc(14,A,2,1,"mat-cell",8),s.BQk(),s.ynx(15,9),s.YNc(16,N,2,0,"mat-header-cell",5),s.YNc(17,B,2,1,"mat-cell",8),s.BQk(),s.ynx(18,10),s.YNc(19,F,1,0,"mat-header-cell",5),s.YNc(20,I,5,0,"mat-cell",11),s.BQk(),s.YNc(21,U,1,0,"mat-header-row",12),s.YNc(22,y,1,0,"mat-row",13),s.qZA(),s.TgZ(23,"form-component",14),s.NdJ("formStatusEvent",function(t){return e.setFormStatus(t)})("taskEvent",function(t){return e.saveDataTasks(t)}),s.qZA(),s.qZA()),2&t&&(s.xp6(2),s.Oqu(e.project.name),s.xp6(6),s.Q6J("dataSource",e.dataSource),s.xp6(13),s.Q6J("matHeaderRowDef",e.displayedColumns),s.xp6(1),s.Q6J("matRowDefColumns",e.displayedColumns),s.xp6(1),s.Q6J("task",e.task)("formStatus",e.formStatus))},directives:[d.BZ,d.w1,d.fO,d.Dz,d.as,d.nj,P,d.ge,d.ev,d.XQ,d.Gk],styles:[".tasks[_ngcontent-%COMP%]{margin-left:100px;margin-top:30px}h3[_ngcontent-%COMP%]{margin-bottom:5px;color:#397575}h4[_ngcontent-%COMP%]{margin-bottom:8px}.btns[_ngcontent-%COMP%]{padding-left:20px}.btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{margin-right:5px}.title-task[_ngcontent-%COMP%]{text-align:center;font-weight:700}.new-task[_ngcontent-%COMP%]{display:flex;flex-direction:row;margin-bottom:5px;justify-content:center;margin-top:8px}label[_ngcontent-%COMP%]{padding:10px;text-align:center;width:25%}input[type=text][_ngcontent-%COMP%]{padding:7px}#btnEditTask[_ngcontent-%COMP%], #btnSaveTask[_ngcontent-%COMP%]{width:68%;margin-left:auto;padding:5px}.title-addBtn[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:baseline;min-width:350px}.addBtn[_ngcontent-%COMP%], .deleteBtn[_ngcontent-%COMP%], .editBtn[_ngcontent-%COMP%]{padding:3px 10px}.addBtn[_ngcontent-%COMP%]:hover, .deleteBtn[_ngcontent-%COMP%]:hover, .editBtn[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.addBtn[_ngcontent-%COMP%], .deleteBtn[_ngcontent-%COMP%], .editBtn[_ngcontent-%COMP%]{background-color:#79adad;border:none;color:#fff;border-radius:2px}.deleteBtn[_ngcontent-%COMP%]{background-color:#d1b373}.editBtn[_ngcontent-%COMP%]{margin-right:10px}.addBtn[_ngcontent-%COMP%]{margin-left:auto;padding:10px;margin-bottom:8px}.mat-table[_ngcontent-%COMP%]{padding-right:20px}"]}),t})()}];let J=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[a.Bz.forChild(D)],a.Bz]}),t})();var Y=n(6197);let E=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({providers:[c.m],imports:[[o.ez,i.JF,J,r.u5,r.UX,Y.O]]}),t})()}}]);